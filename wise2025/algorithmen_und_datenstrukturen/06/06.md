# Algorithmen und Datenstrukturen - Übungsblatt 6

## Aufgabe 6.3: Offenes Hashing (Verkettung)

**Gegeben:**

- Hashfunktion: `f(s) = (AnzahlVokale(s) + AnzahlZeichen(s)) mod 8`
- Tabellengröße: 8
- Verfahren: Offenes Hashing (Chaining/Verkettung)

**Elemente in Reihenfolge:** Patrizia, Sebastian, Maike, Lukas, Nele, Sarah, Matthias, Manuel

### Berechnung der Hashwerte

| Name          | Vokale (a,e,i,o,u) | Länge | Rechnung                 | Hash  |
| :------------ | :----------------: | :---: | :----------------------- | :---: |
| **Patrizia**  |    4 (a,i,i,a)     |   8   | (4 + 8) mod 8 = 12 mod 8 | **4** |
| **Sebastian** |    4 (e,a,i,a)     |   9   | (4 + 9) mod 8 = 13 mod 8 | **5** |
| **Maike**     |     3 (a,i,e)      |   5   | (3 + 5) mod 8 = 8 mod 8  | **0** |
| **Lukas**     |      2 (u,a)       |   5   | (2 + 5) mod 8 = 7 mod 8  | **7** |
| **Nele**      |      2 (e,e)       |   4   | (2 + 4) mod 8 = 6 mod 8  | **6** |
| **Sarah**     |      2 (a,a)       |   5   | (2 + 5) mod 8 = 7 mod 8  | **7** |
| **Matthias**  |     3 (a,i,a)      |   8   | (3 + 8) mod 8 = 11 mod 8 | **3** |
| **Manuel**    |     3 (a,u,e)      |   6   | (3 + 6) mod 8 = 9 mod 8  | **1** |

### Einfügen in die Hashtabelle

Bei **offenes Hashing** werden Kollisionen durch Verkettung (Chaining) gelöst. Jeder Tabellenplatz enthält eine Liste.

**Einfügereihenfolge:**

1. Patrizia → Hash 4 → Index 4: [Patrizia]
2. Sebastian → Hash 5 → Index 5: [Sebastian]
3. Maike → Hash 0 → Index 0: [Maike]
4. Lukas → Hash 7 → Index 7: [Lukas]
5. Nele → Hash 6 → Index 6: [Nele]
6. Sarah → Hash 7 → **Kollision!** → Index 7: [Lukas, Sarah]
7. Matthias → Hash 3 → Index 3: [Matthias]
8. Manuel → Hash 1 → Index 1: [Manuel]

### Finale Hashtabelle

```
Index 0: [Maike]
Index 1: [Manuel]
Index 2: []
Index 3: [Matthias]
Index 4: [Patrizia]
Index 5: [Sebastian]
Index 6: [Nele]
Index 7: [Lukas, Sarah]  ← Kollision aufgelöst durch Verkettung
```

**Beobachtung:** Nur eine Kollision bei Index 7 (Lukas und Sarah).

---

## Aufgabe 6.4: Geschlossenes Hashing (Offene Adressierung)

**Gegeben:**

- Hashfunktion: `f(x) = ⌊x/100⌋ mod 10` (Hunderterstelle mod 10)
- Tabellengröße: N = 10
- Schlüssel: 1001, 1542, 429, 1320, 17, 900, 417, 2302, 1920

**Verfahren:** Geschlossenes Hashing mit zwei Sondierungsmethoden

### 1. Lineares Sondieren

**Sondierungsformel:** `index = (home + i) mod N` mit i = 0, 1, 2, 3, ...

| Schlüssel | ⌊x/100⌋ | f(x) = mod 10 | Sondierung                                                   | Eingefügt bei |
| :-------- | :-----: | :-----------: | :----------------------------------------------------------- | :-----------: |
| 1001      |   10    |     **0**     | 0 frei                                                       |     **0**     |
| 1542      |   15    |     **5**     | 5 frei                                                       |     **5**     |
| 429       |    4    |     **4**     | 4 frei                                                       |     **4**     |
| 1320      |   13    |     **3**     | 3 frei                                                       |     **3**     |
| 17        |    0    |     **0**     | 0 besetzt → (0+1)=1 frei                                     |     **1**     |
| 900       |    9    |     **9**     | 9 frei                                                       |     **9**     |
| 417       |    4    |     **4**     | 4 besetzt → 5 besetzt → (4+2)=6 frei                         |     **6**     |
| 2302      |   23    |     **3**     | 3 besetzt → 4 besetzt → 5 besetzt → 6 besetzt → (3+4)=7 frei |     **7**     |
| 1920      |   19    |     **9**     | 9 besetzt → 0 besetzt → 1 besetzt → (9+3)=2 frei             |     **2**     |

**Finale Tabelle (Lineares Sondieren):**

```
Index: [0]    [1]  [2]   [3]   [4]  [5]   [6]  [7]   [8] [9]
Wert:  [1001] [17] [1920][1320][429][1542][417][2302][ _ ][900]
```

### 2. Quadratisches Sondieren

**Sondierungsformel:** `index = (home + i²) mod N` mit i = 0, 1, 2, 3, ...

| Schlüssel | f(x)  | Sondierung                                                                                                  | Eingefügt bei |
| :-------- | :---: | :---------------------------------------------------------------------------------------------------------- | :-----------: |
| 1001      | **0** | 0 frei                                                                                                      |     **0**     |
| 1542      | **5** | 5 frei                                                                                                      |     **5**     |
| 429       | **4** | 4 frei                                                                                                      |     **4**     |
| 1320      | **3** | 3 frei                                                                                                      |     **3**     |
| 17        | **0** | 0 besetzt → (0+1²)=1 frei                                                                                   |     **1**     |
| 900       | **9** | 9 frei                                                                                                      |     **9**     |
| 417       | **4** | 4 besetzt → (4+1²)=5 besetzt → (4+4)=8 frei                                                                 |     **8**     |
| 2302      | **3** | 3 besetzt → (3+1²)=4 besetzt → (3+4)=7 frei                                                                 |     **7**     |
| 1920      | **9** | 9 besetzt → (9+1)=0 besetzt → (9+4)=3 besetzt → (9+9)=8 besetzt → (9+16)=5 besetzt → (9+25)=4 besetzt → ... |  **FEHLER!**  |

**Sondierungsfolge für 1920:**

- i=0: (9+0) mod 10 = 9 (besetzt: 900)
- i=1: (9+1) mod 10 = 0 (besetzt: 1001)
- i=2: (9+4) mod 10 = 3 (besetzt: 1320)
- i=3: (9+9) mod 10 = 8 (besetzt: 417)
- i=4: (9+16) mod 10 = 5 (besetzt: 1542)
- i=5: (9+25) mod 10 = 4 (besetzt: 429)
- i=6: (9+36) mod 10 = 5 (besetzt!)
- → **Zyklus! Felder 2, 6, 7 werden nie erreicht!**

**Finale Tabelle (Quadratisches Sondieren):**

```
Index: [0]    [1]  [2] [3]   [4]  [5]   [6] [7]   [8]  [9]
Wert:  [1001] [17] [ _ ][1320][429][1542][ _ ][2302][417][900]

       1920 konnte NICHT eingefügt werden! ❌
```

### Was passiert?

**Problem beim quadratischen Sondieren:**

- Der Schlüssel **1920** kann nicht eingefügt werden, obwohl freie Plätze vorhanden sind (Index 2 und 6)!
- Beim quadratischen Sondieren werden nicht alle Tabellenplätze erreicht, wenn:
    - Die Tabellengröße N keine Primzahl ist
    - Die Tabelle mehr als zur Hälfte gefüllt ist

**Beobachtung:**

- Die Sondierungsfolge für 1920 erzeugt einen **Zyklus** und trifft nur auf die Indizes {9, 0, 3, 8, 5, 4, ...}
- Indizes 2, 6, 7 werden niemals in der Sondierung erreicht
- Dies ist ein bekanntes Problem des quadratischen Sondierens bei ungünstigen Tabellengrößen

**Lösung in der Praxis:**

- Tabellengröße als Primzahl wählen
- Füllgrad unter 50% halten
- Alternative Sondierungsmethoden (z.B. Double Hashing)
